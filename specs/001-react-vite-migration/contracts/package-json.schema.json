{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Required package.json structure after Vite migration",
  "examples": [
    {
      "dependencies": {
        "@ffmpeg/ffmpeg": "^0.12.15",
        "@ffmpeg/util": "^0.12.2",
        "react": "^19.2.0",
        "react-dom": "^19.2.0"
      },
      "devDependencies": {
        "@vitejs/plugin-react-swc": "^4.0.0",
        "typescript": "^5",
        "vite": "^6.0.0"
      },
      "scripts": {
        "build": "vite build",
        "dev": "vite",
        "lint": "eslint src",
        "preview": "vite preview"
      }
    }
  ],
  "properties": {
    "dependencies": {
      "properties": {
        "@ffmpeg/ffmpeg": {
          "description": "FFmpeg.wasm 0.12.x required",
          "pattern": "^\\^?0\\.12\\.",
          "type": "string"
        },
        "@vercel/analytics": {
          "description": "Vercel Analytics must be removed",
          "not": {}
        },
        "next": {
          "description": "Next.js must NOT be present",
          "not": {}
        },
        "react": {
          "description": "React 19.2.x required",
          "pattern": "^\\^?19\\.2\\.",
          "type": "string"
        },
        "react-dom": {
          "description": "React DOM 19.2.x required",
          "pattern": "^\\^?19\\.2\\.",
          "type": "string"
        }
      },
      "required": ["react", "react-dom", "@ffmpeg/ffmpeg"],
      "type": "object"
    },
    "devDependencies": {
      "properties": {
        "@vitejs/plugin-react-swc": {
          "description": "React SWC plugin 4.x required",
          "pattern": "^\\^?4\\.",
          "type": "string"
        },
        "eslint-config-next": {
          "description": "Next.js ESLint config must be removed",
          "not": {}
        },
        "typescript": {
          "description": "TypeScript 5.x required",
          "pattern": "^\\^?5\\.",
          "type": "string"
        },
        "vite": {
          "description": "Vite 6.x required",
          "pattern": "^\\^?6\\.",
          "type": "string"
        }
      },
      "required": ["vite", "@vitejs/plugin-react-swc", "typescript"],
      "type": "object"
    },
    "scripts": {
      "properties": {
        "build": {
          "description": "Production build command (must use vite build)",
          "pattern": "^vite build$",
          "type": "string"
        },
        "dev": {
          "description": "Development server command (must use vite)",
          "pattern": "^vite$",
          "type": "string"
        },
        "lint": {
          "description": "Linting command",
          "type": "string"
        },
        "preview": {
          "description": "Preview production build",
          "pattern": "^vite preview$",
          "type": "string"
        }
      },
      "required": ["dev", "build", "lint"],
      "type": "object"
    }
  },
  "required": ["scripts", "dependencies", "devDependencies"],
  "title": "Package.json Migration Contract",
  "type": "object"
}
