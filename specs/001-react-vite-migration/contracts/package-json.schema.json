{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Package.json Migration Contract",
  "description": "Required package.json structure after Vite migration",
  "type": "object",
  "required": ["scripts", "dependencies", "devDependencies"],
  "properties": {
    "scripts": {
      "type": "object",
      "required": ["dev", "build", "lint"],
      "properties": {
        "dev": {
          "type": "string",
          "pattern": "^vite$",
          "description": "Development server command (must use vite)"
        },
        "build": {
          "type": "string",
          "pattern": "^vite build$",
          "description": "Production build command (must use vite build)"
        },
        "preview": {
          "type": "string",
          "pattern": "^vite preview$",
          "description": "Preview production build"
        },
        "lint": {
          "type": "string",
          "description": "Linting command"
        }
      }
    },
    "dependencies": {
      "type": "object",
      "required": ["react", "react-dom", "@ffmpeg/ffmpeg"],
      "properties": {
        "react": {
          "type": "string",
          "pattern": "^\\^?19\\.2\\.",
          "description": "React 19.2.x required"
        },
        "react-dom": {
          "type": "string",
          "pattern": "^\\^?19\\.2\\.",
          "description": "React DOM 19.2.x required"
        },
        "@ffmpeg/ffmpeg": {
          "type": "string",
          "pattern": "^\\^?0\\.12\\.",
          "description": "FFmpeg.wasm 0.12.x required"
        },
        "next": {
          "not": {},
          "description": "Next.js must NOT be present"
        },
        "@vercel/analytics": {
          "not": {},
          "description": "Vercel Analytics must be removed"
        }
      }
    },
    "devDependencies": {
      "type": "object",
      "required": ["vite", "@vitejs/plugin-react-swc", "typescript"],
      "properties": {
        "vite": {
          "type": "string",
          "pattern": "^\\^?6\\.",
          "description": "Vite 6.x required"
        },
        "@vitejs/plugin-react-swc": {
          "type": "string",
          "pattern": "^\\^?4\\.",
          "description": "React SWC plugin 4.x required"
        },
        "typescript": {
          "type": "string",
          "pattern": "^\\^?5\\.",
          "description": "TypeScript 5.x required"
        },
        "eslint-config-next": {
          "not": {},
          "description": "Next.js ESLint config must be removed"
        }
      }
    }
  },
  "examples": [
    {
      "scripts": {
        "dev": "vite",
        "build": "vite build",
        "preview": "vite preview",
        "lint": "eslint src"
      },
      "dependencies": {
        "react": "^19.2.0",
        "react-dom": "^19.2.0",
        "@ffmpeg/ffmpeg": "^0.12.15",
        "@ffmpeg/util": "^0.12.2"
      },
      "devDependencies": {
        "vite": "^6.0.0",
        "@vitejs/plugin-react-swc": "^4.0.0",
        "typescript": "^5"
      }
    }
  ]
}
